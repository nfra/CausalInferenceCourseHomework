models = list(workedm_ols, workedm_2ndstage, workedm_2ndstage, workedm_iv)
view_stargazer(models,
style = 'AER',
title = 'OLS and 2SLS Regressions, 1980 PUMS Data',
omit = 'Constant',
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = starprep(models)
)
models_se = starprep(models)
View(models_se)
models = list(workedm_ols, workedm_2ndstage, workedm_2ndstage, workedm_iv)
models_se = starprep(models)
models_se
models = list(workedm_ols, workedm_2ndstage, workedm_2ndstage, workedm_iv)
starprep(models)
models = list(workedm_ols, workedm_2ndstage, workedm_2ndstage, workedm_iv)
list(workedm_ols, workedm_2ndstage, workedm_2ndstage, workedm_iv)
models_se = starprep(models)
models_se
View(models)
View(models_se)
models_se = starprep(workedm_ols, workedm_2ndstage, workedm_2ndstage, workedm_iv)
View(models_se)
models_se = starprep(workedm_ols, 0, workedm_2ndstage, workedm_iv)
models_se = starprep(workedm_ols, NULL, workedm_2ndstage, workedm_iv)
models_se[2]
models_se = starprep(workedm_ols, workedm_2ndstage, workedm_2ndstage, workedm_iv)
models_se[2]
View(models_se)
models_se = starprep(workedm_ols, workedm_2ndstage, workedm_2ndstage, workedm_iv)
View(models_se)
models_se[2] = NULL
models_se = starprep(workedm_ols, workedm_2ndstage, workedm_2ndstage, workedm_iv)
models_se[2] = NULL
View(models_se)
view_stargazer(models,
style = 'AER',
title = 'OLS and 2SLS Regressions, 1980 PUMS Data',
omit = 'Constant',
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = starprep(workedm_ols, workedm_2ndstage, workedm_2ndstage, workedm_iv)
)
view_stargazer(models,
style = 'AER',
title = 'OLS and 2SLS Regressions, 1980 PUMS Data',
omit = 'Constant',
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = models_se
)
models_se[2] = c(0,0)
view_stargazer(models,
style = 'AER',
title = 'OLS and 2SLS Regressions, 1980 PUMS Data',
omit = 'Constant',
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = models_se
)
sqrt(
diag(
sandwich::vcovHC(workedm_iv, type = "HC1")
)
)
stargazer(
models,
header = FALSE,
summary = FALSE,
style = 'AER',
omit = 'Constant',
omit.stat = list('adj.rsq', 'rsd.dev'),
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = models_se,
notes = c('Notes: This data includes women with two or more children except for women',
'whose second birth was less than a year old when surveyed.')
)
stargazer(
models,
header = FALSE,
summary = FALSE,
style = 'AER',
omit = 'Constant',
omit.stat = c('adj.rsq', 'rsd.dev'),
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = models_se,
notes = c('Notes: This data includes women with two or more children except for women',
'whose second birth was less than a year old when surveyed.')
)
stargazer(
models,
header = FALSE,
summary = FALSE,
style = 'AER',
omit = 'Constant',
omit.stat = 'adj.rsq rsd.dev',
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = models_se,
notes = c('Notes: This data includes women with two or more children except for women',
'whose second birth was less than a year old when surveyed.')
)
stargazer(
models,
header = FALSE,
summary = FALSE,
style = 'AER',
omit = 'Constant',
omit.stat = 'adj.rsq',
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = models_se,
notes = c('Notes: This data includes women with two or more children except for women',
'whose second birth was less than a year old when surveyed.')
)
view_stargazer(models,
style = 'AER',
title = 'OLS and 2SLS Regressions, 1980 PUMS Data',
omit = 'Constant',
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = models_se,
omit.stat = 'adj.rsq'
)
view_stargazer(models,
style = 'AER',
title = 'OLS and 2SLS Regressions, 1980 PUMS Data',
omit = 'Constant',
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = models_se,
omit.stat = 'res.dev'
)
view_stargazer(models,
style = 'AER',
title = 'OLS and 2SLS Regressions, 1980 PUMS Data',
omit = 'Constant',
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = models_se,
omit.stat = 'res.se'
)
view_stargazer(models,
style = 'AER',
title = 'OLS and 2SLS Regressions, 1980 PUMS Data',
omit = 'Constant',
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = models_se,
omit.stat = 'res.std'
)
view_stargazer(models,
style = 'AER',
title = 'OLS and 2SLS Regressions, 1980 PUMS Data',
omit = 'Constant',
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = models_se,
omit.stat = 'res'
)
view_stargazer(models,
style = 'AER',
title = 'OLS and 2SLS Regressions, 1980 PUMS Data',
omit = 'Constant',
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = models_se,
omit.stat = 'ser'
)
view_stargazer(models,
style = 'AER',
title = 'OLS and 2SLS Regressions, 1980 PUMS Data',
omit = 'Constant',
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = models_se,
omit.stat = c('ser', 'adj.rsq')
)
models = list(workedm_ols, workedm_iv, workedm_2ndstage, workedm_iv)
models_se = starprep(workedm_ols, workedm_iv, workedm_2ndstage, workedm_iv)
models_se[2] = c(0,0)
view_stargazer(models,
style = 'AER',
title = 'OLS and 2SLS Regressions, 1980 PUMS Data',
omit = 'Constant',
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = models_se,
omit.stat = c('ser', 'adj.rsq')
)
view_stargazer(models,
style = 'AER',
title = 'OLS and 2SLS Regressions, 1980 PUMS Data',
omit = 'Constant',
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = models_se,
omit.stat = c('ser', 'adj.rsq'),
column.labels = c('OLS', 'CIV', 'M2SLS', '2SlS')
)
view_stargazer(models,
style = 'AER',
title = 'OLS and 2SLS Regressions, 1980 PUMS Data',
omit = 'Constant',
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = models_se,
omit.stat = c('ser', 'adj.rsq'),
column.labels = c('OLS', 'CIV', 'M2SLS', '2SlS'),
dep.var.labels = c('Greater than 2 children')
)
view_stargazer(models,
style = 'AER',
title = 'OLS and 2SLS Regressions, 1980 PUMS Data',
omit = 'Constant',
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = models_se,
omit.stat = c('ser', 'adj.rsq'),
colnames = c('OLS', 'CIV', 'M2SLS', '2SlS'),
dep.var.labels = c('Worked in past year')
)
view_stargazer(models,
style = 'AER',
title = 'OLS and 2SLS Regressions, 1980 PUMS Data',
omit = 'Constant',
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = models_se,
omit.stat = c('ser', 'adj.rsq'),
model.names=F,
names = c('OLS', 'CIV', 'M2SLS', '2SlS'),
dep.var.labels = c('Worked in past year'),
covariate.labels = c('More than 2 kids')
)
view_stargazer(models,
style = 'AER',
title = 'OLS and 2SLS Regressions, 1980 PUMS Data',
omit = 'Constant',
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = models_se,
omit.stat = c('ser', 'adj.rsq'),
model.names=T,
names = c('OLS', 'CIV', 'M2SLS', '2SlS'),
dep.var.labels = c('Worked in past year'),
covariate.labels = c('More than 2 kids')
)
view_stargazer(models,
style = 'AER',
title = 'OLS and 2SLS Regressions, 1980 PUMS Data',
omit = 'Constant',
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = models_se,
omit.stat = c('ser', 'adj.rsq'),
column.labels = c('OLS', 'CIV', 'M2SLS', '2SlS'),
dep.var.labels = c('Worked in past year'),
covariate.labels = c('More than 2 kids')
)
view_stargazer(models,
style = 'AER',
title = 'OLS and 2SLS Regressions, 1980 PUMS Data',
omit = 'Constant',
coef = list(NULL, c(0, as.numeric(workedm_red$coefficients['samesex']/workedm_1ststage$coefficients['samesex'])), NULL, NULL),
se = models_se,
omit.stat = c('ser', 'adj.rsq'),
column.labels = c('OLS', 'CIV', 'M2SLS', '2SlS'),
model.names = F,
dep.var.labels = c('Worked in past year'),
covariate.labels = c('More than 2 kids')
)
pums80_2ndstage <- as.data.table(pums80[,list(samesex,
workedm,
weeksm1,
hourswm,
incomem)
]
)
# run regressions with workedm as outcome
workedm_ols <- lm(workedm ~ threepluskids, data=pums80)
workedm_red <- lm(workedm ~ samesex, data=pums80)
firststage <- lm(threepluskids ~ samesex, data=pums80)
pums80_2ndstage$threepluskids_workedm <- predict(firststage)
workedm_2ndstage <- lm(workedm ~ threepluskids_workedm, data=pums80_2ndstage)
workedm_iv <- ivreg(workedm ~ threepluskids | samesex, data=pums80)
# run regrssions with weeksm1 as outcome
weeksm1_ols <- lm(weeksm1 ~ threepluskids, data=pums80)
weeksm1_red <- lm(weeksm1 ~ samesex, data=pums80)
pums80_2ndstage <- as.data.table(pums80[,list(samesex, workedm)])
pums80_2ndstage$threepluskids_weeksm1 <- predict(firststage)
weeksm1_2ndstage <- lm(weeksm1 ~ threepluskids_weeksm1, data=pums80_2ndstage)
pums80_2ndstage <- as.data.table(pums80[,list(samesex,
workedm,
weeksm1,
hourswm,
incomem)
]
)
# run regressions with workedm as outcome
workedm_ols <- lm(workedm ~ threepluskids, data=pums80)
workedm_red <- lm(workedm ~ samesex, data=pums80)
firststage <- lm(threepluskids ~ samesex, data=pums80)
pums80_2ndstage$threepluskids <- predict(firststage)
workedm_2ndstage <- lm(workedm ~ threepluskids, data=pums80_2ndstage)
workedm_iv <- ivreg(workedm ~ threepluskids | samesex, data=pums80)
# run regrssions with weeksm1 as outcome
weeksm1_ols <- lm(weeksm1 ~ threepluskids, data=pums80)
weeksm1_red <- lm(weeksm1 ~ samesex, data=pums80)
weeksm1_2ndstage <- lm(weeksm1 ~ threepluskids, data=pums80_2ndstage)
weeksm1_iv <- ivreg(weeksm1 ~ threepluskids | samesex, data=pums80)
models = list(workedm_ols, workedm_iv, workedm_2ndstage, workedm_iv,
weeksm1_ols, weeksm1_iv, weeksm1_2ndstage, weeksm1_iv)
models_se = starprep(workedm_ols, workedm_iv, workedm_2ndstage, workedm_iv,
weeksm1_ols, weeksm1_iv, weeksm1_2ndstage, weeksm1_iv)
models_se[2] = c(0,0)
models_se[5] = c(0,0)
models_coef = list(NULL,
c(0, as.numeric(workedm_red$coefficients['samesex']
/firststage$coefficients['samesex'])),
NULL,
NULL,
NULL,
c(0, as.numeric(weeksm1_red$coefficients['samesex']
/firststage$coefficients['samesex'])),
NULL,
NULL
)
stargazer(models,
style = 'AER',
title = 'OLS and 2SLS Regressions, 1980 PUMS Data',
omit = 'Constant',
coef = models_coef,
se = models_se,
omit.stat = c('ser', 'adj.rsq'),
column.labels = c('OLS', 'CIV', 'M2SLS', '2SLS',
'OLS', 'CIV', 'M2SLS', '2SLS'),
model.names = F,
dep.var.labels = c('Worked in past year                  Weeks worked in past year'),
covariate.labels = c('More than 2 kids')
)
pums80_2ndstage <- as.data.table(pums80[,list(samesex,
workedm,
weeksm1,
hourswm,
incomem)
]
)
# run regressions with workedm as outcome
workedm_ols <- lm(workedm ~ threepluskids, data=pums80)
workedm_red <- lm(workedm ~ samesex, data=pums80)
firststage <- lm(threepluskids ~ samesex, data=pums80)
pums80_2ndstage$threepluskids <- predict(firststage)
workedm_2ndstage <- lm(workedm ~ threepluskids, data=pums80_2ndstage)
workedm_iv <- ivreg(workedm ~ threepluskids | samesex, data=pums80)
# run regrssions with weeksm1 as outcome
weeksm1_ols <- lm(weeksm1 ~ threepluskids, data=pums80)
weeksm1_red <- lm(weeksm1 ~ samesex, data=pums80)
weeksm1_2ndstage <- lm(weeksm1 ~ threepluskids, data=pums80_2ndstage)
weeksm1_iv <- ivreg(weeksm1 ~ threepluskids | samesex, data=pums80)
models = list(workedm_ols, workedm_iv, workedm_2ndstage, workedm_iv,
weeksm1_ols, weeksm1_iv, weeksm1_2ndstage, weeksm1_iv)
models_se = starprep(workedm_ols, workedm_iv, workedm_2ndstage, workedm_iv,
weeksm1_ols, weeksm1_iv, weeksm1_2ndstage, weeksm1_iv)
models_se[2] = c(0,0)
models_se[5] = c(0,0)
models_coef = list(NULL,
c(0, as.numeric(workedm_red$coefficients['samesex']
/firststage$coefficients['samesex']), 0),
NULL,
NULL,
NULL,
c(0, 0, as.numeric(weeksm1_red$coefficients['samesex']
/firststage$coefficients['samesex'])),
NULL,
NULL
)
stargazer(models,
style = 'AER',
title = 'OLS and 2SLS Regressions, 1980 PUMS Data',
omit = 'Constant',
coef = models_coef,
se = models_se,
omit.stat = c('ser', 'adj.rsq'),
column.labels = c('OLS', 'CIV', 'M2SLS', '2SLS',
'OLS', 'CIV', 'M2SLS', '2SLS'),
model.names = F,
dep.var.labels = c('Worked in past year                  Weeks worked in past year'),
covariate.labels = c('More than 2 kids')
)
library(data.table)
library(stargazer)
library(haven)
library(AER)
library(ivpack)
library(estimatr)
setwd('~/UT Courses/3. Spring 2019/Causal Inference/CausalInferenceCourseHomework/Assignment2_IV')
pums80 <- as.data.table(read_dta('data/pums80.dta'))
# run regressions with hourswn as outcome
hourswm_ols <- lm(hourswm ~ threepluskids, data=pums80)
pums80_2ndstage <- as.data.table(pums80[,list(samesex,
workedm,
weeksm1,
hourswm,
incomem)
]
)
# run regressions with workedm as outcome
workedm_ols <- lm(workedm ~ threepluskids, data=pums80)
# add necessary variables
pums80$threepluskids <- as.numeric(eval(pums80$kidcount >= 3))
pums80_2ndstage <- as.data.table(pums80[,list(samesex,
workedm,
weeksm1,
hourswm,
incomem)
]
)
# run regressions with workedm as outcome
workedm_ols <- lm(workedm ~ threepluskids, data=pums80)
workedm_red <- lm(workedm ~ samesex, data=pums80)
firststage <- lm(threepluskids ~ samesex, data=pums80)
pums80_2ndstage$threepluskids <- predict(firststage)
workedm_2ndstage <- lm(workedm ~ threepluskids, data=pums80_2ndstage)
workedm_iv <- ivreg(workedm ~ threepluskids | samesex, data=pums80)
# run regressions with weeksm1 as outcome
weeksm1_ols <- lm(weeksm1 ~ threepluskids, data=pums80)
weeksm1_red <- lm(weeksm1 ~ samesex, data=pums80)
weeksm1_2ndstage <- lm(weeksm1 ~ threepluskids, data=pums80_2ndstage)
weeksm1_iv <- ivreg(weeksm1 ~ threepluskids | samesex, data=pums80)
models = list(workedm_ols, workedm_iv, workedm_2ndstage, workedm_iv,
weeksm1_ols, weeksm1_iv, weeksm1_2ndstage, weeksm1_iv)
models_se = starprep(workedm_ols, workedm_iv, workedm_2ndstage, workedm_iv,
weeksm1_ols, weeksm1_iv, weeksm1_2ndstage, weeksm1_iv)
models_se[2] = c(0,0)
models_se[6] = c(0,0)
models_coef = list(NULL,
c(0, as.numeric(workedm_red$coefficients['samesex']
/firststage$coefficients['samesex'])),
NULL,
NULL,
NULL,
c(0, as.numeric(weeksm1_red$coefficients['samesex']
/firststage$coefficients['samesex'])),
NULL,
NULL
)
stargazer(models,
style = 'AER',
title = 'OLS and 2SLS Regressions, 1980 PUMS Data',
omit = 'Constant',
coef = models_coef,
se = models_se,
omit.stat = c('ser', 'adj.rsq'),
column.labels = c('OLS', 'CIV', 'M2SLS', '2SLS',
'OLS', 'CIV', 'M2SLS', '2SLS'),
model.names = F,
dep.var.labels = c('Worked in past year', 'Weeks worked in past year'),
covariate.labels = c('More than 2 kids'),
font.size = 'tiny'
)
gft_train <- read.csv("~/UT Courses/3. Spring 2019/Data Mining, Statistical Learning/ECO395M/data/gft_train.csv")
View(gft_train)
?gamlr()
library(gamlr)
?gamlr
gamlr(x = gft_train[,2:16],
y = gft_train$cdcflu,
family = 'gaussian')
plot(gamlr)
plot(gft_lasso)
gft_lasso <- gamlr(x = gft_train[,2:16],
y = gft_train$cdcflu,
family = 'gaussian')
plot(gft_lasso)
plot.gamlr(gft_lasso)
gft_x = as.matrix(gft_lasso[,-1:2])
gft_x = as.matrix(gft_lasso[,-list(1:2)])
gft_x = as.matrix(gft_lasso[,-list(1,2)])
gft_x = as.matrix(gft_lasso[,2:16])
gft_x = as.matrix(gft_train[,2:16])
gft_lasso <- glm(x = gft_x,
y = gft_y,
family = 'gaussian')
plot.gamlr(gft_lasso)
gft_lasso <- gamlr(x = gft_x,
y = gft_y,
family = 'gaussian')
gft_x = as.matrix(gft_train[,2:16])
gft_y = gft_train$cdcflu
gft_lasso <- gamlr(x = gft_x,
y = gft_y,
family = 'gaussian')
plot.gamlr(gft_lasso)
plot(gft_lasso)
gft_x = as.matrix(gft_train[,3:16])
gft_y = gft_train$cdcflu
gft_lasso <- gamlr(x = gft_x,
y = gft_y,
family = 'gaussian')
plot(gft_lasso)
summary(gft_lasso)
?ivreg
space
space
space
space
space
space
space
space
space
space
space
space
space
space
space
space```{r table3, results='asis', echo=FALSE, warning=F}
space
View(pums80)
library(data.table)
library(stargazer)
library(haven)
library(AER)
library(ivpack)
library(estimatr)
setwd('~/UT Courses/3. Spring 2019/Causal Inference/CausalInferenceCourseHomework/Assignment2_IV')
pums80 <- as.data.table(read_dta('data/pums80.dta'))
pums80$threepluskids <- as.numeric(eval(pums80$kidcount >= 3))
ivreg(workedm ~ threepluskids + agem1 + agefstm + black + hispan + othrace | samesex, data=pums80)
